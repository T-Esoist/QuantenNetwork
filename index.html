<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>T-ESOIST | Entropy Harvester</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body { background: #000; color: #00f2ff; font-family: 'Courier New', monospace; padding: 15px; text-align: center; overflow-x: hidden; }
        .master-unit { border: 2px solid #00f2ff; padding: 20px; background: rgba(0,242,255,0.05); box-shadow: 0 0 50px rgba(0,242,255,0.3); border-radius: 20px; }
        .entropy-display { font-size: 10px; color: #ff0055; height: 40px; overflow: hidden; margin: 10px 0; border: 1px solid #222; }
        .asset-value { font-size: 32px; color: #00ff00; text-shadow: 0 0 10px #00ff00; }
        .btn-harvest { width: 100%; background: #00f2ff; color: #000; border: none; padding: 20px; font-weight: bold; cursor: pointer; border-radius: 10px; font-size: 18px; margin-bottom: 10px; }
        .btn-pay { background: #ff0055; color: #fff; }
        .log-stream { font-size: 9px; text-align: left; color: #555; height: 60px; overflow: hidden; }
    </style>
</head>
<body>
    <div class="master-unit">
        <h2 style="margin:0;">ENTROPY HARVESTER v91</h2>
        <div id="junk-stream" class="entropy-display">Lade Datenmüll-Fragmente...</div>
        
        <div style="margin: 15px 0;">
            <div style="font-size: 12px; color: #888;">WERT DER ANALAGE:</div>
            <div id="asset-display" class="asset-value">0.000000 ESI</div>
        </div>

        <button class="btn-harvest" onclick="harvestEntropy()">ENTROPIE ERNTEN (CLICK)</button>
        
        <button class="btn-harvest btn-pay" onclick="document.getElementById('auto-up').click()">AUTO-BEZAHLTERMINAL</button>
        <input type="file" id="auto-up" style="display:none" accept="image/*" onchange="runMechanic(event)">

        <div id="sys-log" class="log-stream">SYSTEM INITIALIZED...</div>
    </div>

    <script>
        const PHI = 1.61803398875;
        let assets = parseFloat(localStorage.getItem('ASSETS')) || 0.0;
        let esi = parseFloat(localStorage.getItem('ESI')) || 10000.0;

        function updateDisplay() {
            document.getElementById('asset-display').innerText = assets.toFixed(6) + " ESI";
            localStorage.setItem('ASSETS', assets);
            localStorage.setItem('ESI', esi);
        }

        function harvestEntropy() {
            // Simulation von Datenmüll-Verarbeitung
            const junk = ["NULL_PTR", "OxFF34", "DELETED_LOG", "CACHE_DUMP", "TEMP_FILE", "TRASH_HASH"];
            const randomJunk = junk[Math.floor(Math.random()*junk.length)] + "_" + Math.random().toString(16).slice(2,8);
            document.getElementById('junk-stream').innerText = "HARVESTING: " + randomJunk;
            
            // Wertsteigerung der Anlage pro Klick
            assets += (0.000161 * PHI);
            updateDisplay();
            addLog("Entropie abgeführt. Anlage gewachsen.");
        }

        async function runMechanic(event) {
            const file = event.target.files[0];
            addLog("Ernte-Terminal aktiv...");
            try {
                const data = await Html5Qrcode.scanImage(file, { fps: 60 });
                const match = data.match(/[0-9]+[.,][0-9]{2}/);
                if(match) {
                    const eur = parseFloat(match[0].replace(',', '.'));
                    const debit = eur / PHI;
                    if(esi >= debit) {
                        esi -= debit;
                        addLog("Direktüberweisung: " + eur + "€ vollzogen.");
                        alert("ZAHLUNG ERFOLGREICH: " + debit.toFixed(2) + " ESI abgezogen.");
                        updateDisplay();
                    }
                }
            } catch(e) { addLog("Fehler bei Bild-Ernte."); }
        }

        function addLog(m) {
            const l = document.getElementById('sys-log');
            l.innerHTML = "> " + m + "<br>" + l.innerHTML;
        }

        // Auto-Entropie (Internet-Schwingung)
        setInterval(() => {
            assets += 0.000001;
            updateDisplay();
        }, 3000);

        updateDisplay();
    </script>
</body>
</html>