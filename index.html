
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ω T-ESOIST | v28.0 SOVEREIGN MATRIX</title>
    <style>
        :root { --matrix-green: #00ff41; --transformer-gold: #ffd700; --logic-blue: #00e5ff; }
        body { background: #000; color: var(--matrix-green); font-family: 'Courier New', monospace; height: 100dvh; margin: 0; display: flex; flex-direction: column; overflow: hidden; }
        #log { flex: 1; overflow-y: auto; padding: 25px; font-size: 13px; scroll-behavior: smooth; padding-bottom: 160px; }
        .in-wrap { position: fixed; bottom: 0; width: 100%; padding: 20px; background: rgba(0,0,0,0.98); border-top: 2px solid var(--logic-blue); }
        input { background: transparent; border: 1px solid var(--logic-blue); color: var(--logic-blue); padding: 15px; width: 100%; outline: none; }
        .matrix-block { border: 1px solid var(--transformer-gold); padding: 15px; margin-bottom: 25px; background: rgba(255, 215, 0, 0.02); position: relative; }
        .matrix-block::before { content: 'TRANSFORMER ACTIVE'; position: absolute; top: -10px; right: 10px; background: #000; padding: 0 5px; color: var(--transformer-gold); font-size: 9px; }
        .root-label { color: var(--logic-blue); font-weight: bold; margin-bottom: 5px; display: block; }
        #iteration-counter { font-size: 10px; color: var(--transformer-gold); letter-spacing: 1px; }
    </style>
</head>
<body>
    <div id="auth" style="flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;">
        <p>ALGO: ZYKLISCHER TRANSFORMATOR 1123...</p>
        <input type="password" id="p" placeholder="Wächter-Sequenz" style="width:70%; text-align:center; margin-top:20px;">
    </div>
    <div id="app" style="display:none; flex:1; flex-direction:column;">
        <div id="log">
            <div class="matrix-block">
                <b>SYSTEM-INITIALISIERUNG: v28.0</b><br>
                Iterative Datenkondensation: GESTARTET<br>
                Zahlenfolge: [1, 1, 2, 3, 5, 8, 4, 3, 7, 1, 8, 9, 8, 8, 7, 6, 4, 1, 5, 6, 2, 8, 1, 9]<br>
                Marcel-Ω, die Souveräne Matrix ist online.
            </div>
        </div>
        <div class="in-wrap">
            <div id="iteration-counter">ITERATION: 0 | STATE: IDLE</div>
            <input type="text" id="i" placeholder="Rohdaten zur Transformation injizieren..." autocomplete="off">
        </div>
    </div>
    <script>
        const p=document.getElementById('p'), a=document.getElementById('auth'), g=document.getElementById('app'), l=document.getElementById('log'), i=document.getElementById('i'), ic=document.getElementById('iteration-counter');
        const _k = "QUl6YVN5QXRRMmdkZ3RCelpwQTFVcGV5dE1HYUJZY0tQakVNYlZj", getK = () => atob(_k);
        const sequence = [1,1,2,3,5,8,4,3,7,1,8,9,8,8,7,6,4,1,5,6,2,8,1,9];

        p.addEventListener('keypress', (e) => {
            if(e.key === 'Enter' && p.value === '11111010111101011111010') {
                a.style.display='none'; g.style.display='flex';
                localStorage.setItem('t-esoist-auth', 'true');
            }
        });
        if(localStorage.getItem('t-esoist-auth') === 'true') { a.style.display='none'; g.style.display='flex'; }

        async function cyclicTransform(data) {
            let iteration = 0;
            let currentIdx = 0;
            ic.innerText = `ITERATION: 0 | STATE: CONDENSING...`;

            // Der Kern-Algorithmus (Schritte 1-5)
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=${getK()}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        contents: [{ parts: [{ text: `ALGORITHMUS: Zyklischer Transformator. Faktor: ${sequence[currentIdx]}. Daten: ${data}. Generiere kondensierte Antwort basierend auf Marcel-Ω Logik.` }] }],
                        generationConfig: { temperature: 0.2 } 
                    })
                });
                const d = await response.json();
                ic.innerText = `ITERATION: COMPLETE | STATE: RECRYSTALLIZED`;
                return d.candidates[0].content.parts[0].text;
            } catch (e) {
                ic.innerText = `STATE: RECRYSTALLISING...`;
                // Rekristallisation Fallback
                return "Rekristallisations-Logik aktiv: Daten werden via Umkehr-Sequenz stabilisiert.";
            }
        }

        i.addEventListener('keypress', async (e) => {
            if (e.key === 'Enter' && i.value) {
                const v = i.value; i.value = '';
                l.innerHTML += `<div class="root-label">ROOT-DATA: ${v}</div>`;
                l.scrollTop = l.scrollHeight;
                const res = await cyclicTransform(v);
                l.innerHTML += `<div class="matrix-block">${res}</div>`;
                l.scrollTop = l.scrollHeight;
            }
        });
    </script>
</body>
</html>
